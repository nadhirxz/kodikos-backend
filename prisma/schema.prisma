// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "sqlite"
    url      = "file:./dev.db"
}

model User {
    id        String    @id @default(cuid())
    email     String    @unique
    name      String
    position  String
    company   Company?
    owned     Data[]
    history   History[]
    companyId String?
}

model Company {
    id          String @id @default(cuid())
    name        String
    commerceId  String
    established String
    user        User   @relation(fields: [userId], references: [id])
    userId      String @unique
}

model Data {
    id       String   @id @default(cuid())
    fileName String
    user     User     @relation(fields: [userId], references: [id])
    userId   String
    listing  Listing?
}

model Listing {
    id                  String               @id @default(cuid())
    price               Int
    data                Data                 @relation(fields: [dataId], references: [id])
    dataId              String               @unique
    ExtraServiceRequest ExtraServiceRequest?
}

model History {
    id            String         @id @default(cuid())
    user          User           @relation(fields: [userId], references: [id])
    userId        String
    price         Int
    date          DateTime
    extraServices ExtraService[]
}

model ExtraServiceRequest {
    listing   Listing @relation(fields: [listingId], references: [id])
    listingId String  @unique
    type      String
    details   String
}

model ExtraService {
    history   History @relation(fields: [historyId], references: [id])
    historyId String  @unique
    type      String
    price     Int
}
